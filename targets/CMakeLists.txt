find_package(MPI REQUIRED)
find_package(GSL REQUIRED)
find_package(ArgTable REQUIRED)
find_package(Gperftools REQUIRED)
set(CMAKE_C_FLAGS "-pthread")
include_directories(${GSL_INCLUDE_DIR} ${ARGTABLE_INCLUDE_DIRS} ${MPI_INCLUDE_PATH} ${GPERFTOOLS_INCLUDE_DIR} . ../src ../bstrlib)
set(LIBS ${LIBS} ${MPI_LIBRARIES} ${GSL_LIBRARIES} ${ARGTABLE_LIBRARIES} ${GPERFTOOLS_LIBRARIES} hgt bstrlib)
MESSAGE(STATUS ${MPI_INCLUDE_PATH})
set(CMAKE_C_COMPILER cc)
add_executable(hgt_mpi_moran hgt_mpi_moran.c)
target_link_libraries(hgt_mpi_moran ${LIBS})

set(CMAKE_C_COMPILER cc)
add_executable(hgt_mpi_moran_step hgt_mpi_moran_step.c)
target_link_libraries(hgt_mpi_moran_step ${LIBS})

install(TARGETS hgt_mpi_moran_step DESTINATION bin)
